package rafia

import (
	"crypto/tls"
	"crypto/x509"
	"fmt"
)

const (
	KPort = 8080
	KKey  = `-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDZ+XjOX7o4JrcD
cydhmpX4qI+ZGo28w831+opTT3HgpeXcgyCZOT7p8rz+DUwkcRQ6E7V/9aXfAJV7
oBVTnsPT+VQrd8CsEtI7kWa32Xtl/wKaLx02YGkFDn9YSqya2vwBT5Qs1DgUHFEW
/Vi30kpC5PNkURS7AMWMg1aJc+W7blA86GqPOagBsZvxEvSrq7YexhC6Fdt4fZRI
GeZqzh1cRGXUw6GlIXfDEFBOT1T8AxlDi60mGA8uqMCcyQN7sKyCtWpA5cSvIr+Z
Lb/ZwbFg6JouBg+le3t8OurEOseDOhTahMzzxTsA2wHlenqEWf3CTirm3UxtW78a
mZAl8TplAgMBAAECggEAdM03rO6i7N/iBdk46xZY8qvwdsxB0zrhLMQaR1Y04XpE
WAtz9mc0jUxjdYdOm+B0REK3aWAKiBrZ/yrjArH6oaXjMn+zIQHc4cqiTjYd56Pk
kxZYAwFahTklh/xLzZc2nsUz02nMuwoJcdZEKgxner0Qp1rDTwm00fy27GTMX8hZ
K4VT4O+Xx1NxnqMPP/SgKVbjAwMSt2GwcxyN617b9P6MSOhEF2O0SEpz+kcwIyN/
GRGpnFpZWrVNIN/nEXlHoCPyud9H0x/qcrbnhStlOWSRcfVgnEtNLzfIz0P4RSE4
YAzy6ReNwoe86MvAiYqViGCLnUtgJJ6HBPcx9yC1wQKBgQD9scwgfbfqD+TkCgfP
wGF1T0bxl6wR7/e288myYl4S+wiyvX0OAMeQwTZRi3USUSK3AO1ARzm91Fp2tnuJ
EwCD2QyhcorrulCL/aJ1lam8z66QW4yErZsC86YWCIMMyjC1DuhtzkyPpGu83Aty
y19x5H72sob7v7+T6LPVj2j9GQKBgQDb9JMLBmpsnSSF96i75WpbL1k94haVoJN0
LT9qMi/7xbX7fwxH60RXgIbYxsQVBFamfN9mme/ujg7XGZmgevfaNxF1U1zkDF5m
f+92rKLK0heRByEv+wMWD3LRJ1ZXnlSx8OyrCC2MzU/p1rUEJ+BLqo/qK9v7vQ8w
On9nWg1FLQKBgQDDzLbEGOOaRdwd2FQBFvThCmexzKLkUTX5wRxZjiwXMCKdeTwM
U7Oy2DxpIV4g3fgSECgMZSx+g2eymdKsj7rlB98EuBfaKblC4mXBpNoVPKD5D39b
Y3XxCEWWWclzVJXVGAVxwjg64Oa6I4a+eZJXn8gR9OXTZUGiEYbCe+XG+QKBgAlF
72kYlSYNHfwT6+Y4DtrXTTDhtkgKpAzS14iXoxQ/SqPWwGLL1W7G+WhsQNoN+8U7
IIQH22i4ToHdD3AHnylxBuhmYlUu/E/f9u2O67IXV20C2vBV6dRlRFbzDJ3XDAUQ
fjnbt2fnRAY8yhbpw3gNMdISlUywtNI4tSRbVJHlAoGATrOpoyTjR9TCD1FYZUJO
Ddqzvi9eTPVlhOPzQUpf3qtiTqiXLqRJrRyKbQBD+G7xBOhngr3jnTnjsmi51v1e
gwaPuqLEfSlWufQabULW0VQbUf4U78ce5nrPg6nbUPBFZLSbcivILkG5HtvJ7NJF
tRUGnXh5RFplpFFcLjp7CtQ=
-----END PRIVATE KEY-----`
	KCert = `-----BEGIN CERTIFICATE-----
MIIDkTCCAnmgAwIBAgIJAO4tQ2629eaxMA0GCSqGSIb3DQEBCwUAMF8xCzAJBgNV
BAYTAlVTMQswCQYDVQQIDAJDQTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzESMBAG
A1UECgwJSm9yZGFuIFl1MRcwFQYDVQQDDA5sb2NhbGhvc3Q6ODA4MDAeFw0xODAy
MjUwNTI3MDVaFw0xOTAyMjUwNTI3MDVaMF8xCzAJBgNVBAYTAlVTMQswCQYDVQQI
DAJDQTEWMBQGA1UEBwwNTW91bnRhaW4gVmlldzESMBAGA1UECgwJSm9yZGFuIFl1
MRcwFQYDVQQDDA5sb2NhbGhvc3Q6ODA4MDCCASIwDQYJKoZIhvcNAQEBBQADggEP
ADCCAQoCggEBANn5eM5fujgmtwNzJ2Galfioj5kajbzDzfX6ilNPceCl5dyDIJk5
PunyvP4NTCRxFDoTtX/1pd8AlXugFVOew9P5VCt3wKwS0juRZrfZe2X/ApovHTZg
aQUOf1hKrJra/AFPlCzUOBQcURb9WLfSSkLk82RRFLsAxYyDVolz5btuUDzoao85
qAGxm/ES9Kurth7GELoV23h9lEgZ5mrOHVxEZdTDoaUhd8MQUE5PVPwDGUOLrSYY
Dy6owJzJA3uwrIK1akDlxK8iv5ktv9nBsWDomi4GD6V7e3w66sQ6x4M6FNqEzPPF
OwDbAeV6eoRZ/cJOKubdTG1bvxqZkCXxOmUCAwEAAaNQME4wHQYDVR0OBBYEFJ6w
i/AjsMximibRjD6QahsIwl3cMB8GA1UdIwQYMBaAFJ6wi/AjsMximibRjD6QahsI
wl3cMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQELBQADggEBAHw56jycAo8uG28z
NHsBhnaZDuS0Hsbrqfu6qtX/h3MGPw3shKqzwxTlPRU9u0sXVKA6lTboNLVRRSEG
jNLLnW9UfjsJluxVkFFnigy+tsAa93Ky6XrmxI9xaUPMTQ2wMrWv3PgbjaGbLHIT
kouj4wNQXa1ZrJVCBctNYE0c7ZmoNyaTKRrrgaIeBTbNuWgD/xON3G29o8vhMv/e
Wwnnkmt0lhwNUA9HyH/YG4ptxJB1Gsox58Q+/gq8DJQ+fg5xDagaQbFRwwRLY82D
wL4dJhDEdTMQefvnh1gwLCqTcL049rKQRDSw9glZkP8Z671ToxPScn5KionWtM1N
FafP9V4=
-----END CERTIFICATE-----`
)

var (
	KDemoKeyPair  *tls.Certificate
	KDemoCertPool *x509.CertPool
	KDemoAddr     string
)

func init() {
	var err error
	pair, err := tls.X509KeyPair([]byte(KCert), []byte(KKey))
	if err != nil {
		panic(err)
	}
	KDemoKeyPair = &pair
	KDemoCertPool = x509.NewCertPool()
	ok := KDemoCertPool.AppendCertsFromPEM([]byte(KCert))
	if !ok {
		panic("bad certs")
	}
	KDemoAddr = fmt.Sprintf("localhost:%d", KPort)
}
